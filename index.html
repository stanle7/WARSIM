<!DOCTYPE html>
<html>
<head>
<title>Action Trigger with Embedded Popup</title>
</head>
<body>

<h1>Click the button to perform the actions</h1>

<button onclick="performActions()">Trigger Actions (with Embedded Popup)</button>

<script>
function performActions() {
  // --- Action 1: Open an about:blank popup window ---
  console.log("Opening an about:blank popup window...");

  // Open a new window with 'about:blank' as the initial content.
  // This is often less likely to be blocked outright than opening directly to another URL,
  // but popup blockers can still prevent it.
  const popupWindow = window.open('about:blank', 'embeddedContentPopup', 'width=700,height=500,resizable=yes,scrollbars=yes');

  // Check if the popup was blocked by the browser
  if (!popupWindow || popupWindow.closed || typeof popupWindow.closed == 'undefined') {
      console.warn("Popup window might have been blocked by the browser or a popup blocker.");
      // You might want to alert the user here or provide instructions to allow popups.
      // We stop here if the popup was blocked.
      return;
  }

  // --- Action 1b: Dynamically add an iframe to the about:blank popup ---
  console.log("Embedding content into the about:blank popup...");

  try {
      // It's often necessary to open and close the document stream of the new window
      // before writing to it, especially right after opening.
      popupWindow.document.open();

      // Write the HTML structure containing the iframe into the popup window's document.
      popupWindow.document.write(`
        <!DOCTYPE html>
        <html>
        <head>
        <title>Embedded Content</title>
        <style>
          /* Optional: Style to make the iframe fill the popup window */
          body { margin: 0; overflow: hidden; }
          iframe { width: 100%; height: 100%; border: none; }
        </style>
        </head>
        <body>
          <iframe src="https://stanle7.github.io/WARSIM/dos.html"></iframe>
        </body>
        </html>
      `);

      // Close the document stream. This tells the browser that the HTML is complete.
      popupWindow.document.close();

      console.log("Content embedding process initiated in the popup.");

  } catch (e) {
      console.error("Error embedding content into popup:", e);
      // Handle potential errors during the process of writing to the popup.
      // This could happen if the popup was somehow closed unexpectedly or due to other issues.
  }


  // --- Action 2: Change the current website to google.com ---
  console.log("Navigating current page to google.com...");
  // This will immediately change the URL of the current tab/window.
  // This navigation happens regardless of whether the popup opening or embedding succeeded.
  window.location.href = 'https://www.google.com';
}
</script>

<p>
Note: Clicking the button will attempt to open a blank popup window, embed content from stanle7.github.io/WARSIM/dos.html into it using an iframe, and immediately navigate this page to google.com. Browser popup blockers might prevent the popup from appearing.
</p>

</body>
</html>
